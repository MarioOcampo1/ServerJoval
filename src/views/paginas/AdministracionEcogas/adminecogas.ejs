<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css" <!-- Datatable
    -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css">
 

  <title class="text-center">Administración Ecogas</title>
</head>

<body>
   <%- include('./partials/menusuperior.ejs');%>
   <div class="container">
    <div class="row">
      <h1 class="text-center">Administración de obras de Gas</h1>
    </div>
   
  </div>
  <div class="container text-center">
  <div class="btn-group ">
    <a href="/">
      <button class="btn btn-danger" onClick="history.go(-1);">Volver</button>
    </a>
    <a href="/nuevocliente">
      <button class="btn btn-success">Nuevo Cliente</button>
    </a>
    <br>
  </div>
</div>
  <div class="table-responsive">
    <table id="comunicacionDiaria" class="table table-striped table-bordered table-sm table-hover " style="width: 95%">
      <thead>
        <tr>
          <th>
            <h4>Nombre</h4>
          </th>
          <th>
            <h4>N° de carpeta</h4>
          </th>
          <th>
            <h4>Tarea realizada</h4>
          </th>
          <th> <h4>Etapa de la tarea</h4>
            <!-- <Button onclick="$('.filters th').eq($(api.column(colIdx).header()).index())">Prel</Button>
            <button>1p</button> 
            <button>2</button> 
            <button>Obras</button> 
            <button>Caos</button>  -->
          </th>
          <th>
            <h4>Proxima tarea</h4>
          </th>
          <th>
            <h4>Fecha Limite</h4>
          </th>
          <th>
            <h4>Estado</h4>
          </th>
        </tr>
      </thead>
      <tbody>
      </tbody>
      
    </table>
  </div>
  <script type="text/javascript" language="javascript"
  src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
 <script type="text/javascript" language="javascript" charset="utf8"
    src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>
  <script type="text/javascript" language="javascript"
    src="//cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css"></script>
  <!-- Moment.js: -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.4/moment.min.js"></script>
  <!-- Locales for moment.js-->
  <script type="text/javascript" src="//cdn.datatables.net/plug-ins/1.11.3/sorting/datetime-moment.js"></script>
  <script  type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.4/locale/es.js"></script>
  <!-- Datatable -->
  <script  type="text/javascript" src="https://cdn.datatables.net/datetime/1.1.1/css/dataTables.dateTime.min.css"></script>
  <script  type="text/javascript" src="https://cdn.datatables.net/datetime/1.1.1/js/dataTables.dateTime.min.js"></script>
  <script> 
    $(document).ready(function  () {
      
      
      var url = '/adminecogas/info';
      
     tabla= $('#comunicacionDiaria').DataTable({
        orderCellsTop: true,
        fixedHeader: true,
      paging: false,
        "language": { url: "//cdn.datatables.net/plug-ins/1.11.3/i18n/es_es.json" },
        "ajax": {
          "url": url,
          "dataSrc": "",
        },
        "columns": [
          { "width":"5%","data": "Nombre", render: function(data,type,row){
            return '<a href="/editarTareas/' + row.id + '" class="btn btn-outline-secondary btn-sm">'+row.Nombre+'</a>'
          } },
          { "width":"5%","data": "NCarpeta", render: function(data,type,row){
            return '<a href="/editarTareas/' + row.id + '" class="btn btn-outline text-center btn-sm">'+row.NCarpeta+'</a>'
          } },
          { "width":"70%","data": "TareaRealizada" },
          { "data": "EtapaTarea" , render: function(data,type,row){
            return '<a href="/historialcarpeta/' + row.Nombre + '" class="btn btn-secondary btn-sm text-center">'+row.EtapaTarea+'</a>'} },
          { "width":"15%","data": "ProximaTarea" },
          { "width":"5%","data":  "FechaLimite", render:function(data,type,row){
            var oldDate = data;
    momentObj = moment(oldDate).format("d-MMMM-YYYY"),
    newDate = momentObj;
    return newDate;
           }},

           
          { "width":"10%","data": "Estado" },

        ],
      });
    });

  </script>

</body>

</html>