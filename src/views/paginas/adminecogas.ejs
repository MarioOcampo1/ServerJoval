<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" <!-- Datatable
    -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css">
  <script type="text/javascript" language="javascript"
    src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <title class="text-center">Administración Ecogas</title>
</head>

<body>
  <div class="container">
    <div class="row">
      <h1 class="text-center">Administración de obras de Gas</h1>
    </div>
   
  </div>
  
  
  <%- include('../partials/menusuperior.ejs')%>
  <div class="btn-group border-bottom">
    <a href="/">
      <button class="btn btn-danger">Volver</button>
    </a>
    <a href="/nuevocliente">
      <button class="btn btn-success">Nuevo Cliente</button>
    </a>
    <br>
  </div>
  <div class="table-responsive">
    <table id="comunicacionDiaria" class="table table-striped table-bordered table-sm table-hover " style="width: 100%">
      <thead>
        <tr>
          <th>
            <h4>Nombre</h4>
          </th>
          <th>
            <h4>N° de carpeta</h4>
          </th>
          <th>
            <h4>Tarea realizada</h4>
          </th>
          <th>
            <h4>Proxima tarea</h4>
          </th>
          <th>
            <h4>Fecha Limite</h4>
          </th>
          <th>
            <h4>Estado</h4>
          </th>
          <th>

          </th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
  <script type="text/javascript" language="javascript" charset="utf8"
    src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>
  <script type="text/javascript" language="javascript"
    src="//cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css"></script>
  <!-- Moment.js: -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.4/moment.min.js"></script>
  <!-- Locales for moment.js-->
  <script src="//cdn.datatables.net/plug-ins/1.11.3/sorting/datetime-moment.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.4/locale/es.js"></script>
  <script>

    $(document).ready(function () {
      var editar = function (tbody, table) {
      }
      $.fn.dataTable.moment('D/M/YYYY');
//       moment.locale('es');
// $.fn.dataTable.moment( 'L', 'es');

      $('#comunicacionDiaria thead tr')
        .clone(true)
        .addClass('filters')
        .appendTo('#comunicacionDiaria thead');

      var url = '/adminecogas/info';
      $('#comunicacionDiaria').DataTable({
        orderCellsTop: true,
        fixedHeader: true,
        initComplete: function () {
          var api = this.api();
          // For each column
          api
            .columns()
            .eq(0)
            .each(function (colIdx) {
              // Set the header cell to contain the input element
              var cell = $('.filters th').eq(
                $(api.column(colIdx).header()).index()
              );
              var title = $(cell).text();
              $(cell).html('<input type="text" placeholder="' + title + '" />');

              // On every keypress in this input
              $(
                'input',
                $('.filters th').eq($(api.column(colIdx).header()).index())
              )
                .off('keyup change')
                .on('keyup change', function (e) {
                  e.stopPropagation();

                  // Get the search value
                  $(this).attr('title', $(this).val());
                  var regexr = '({search})'; //$(this).parents('th').find('select').val();

                  var cursorPosition = this.selectionStart;
                  // Search the column for that value
                  api
                    .column(colIdx)
                    .search(
                      this.value != ''
                        ? regexr.replace('{search}', '(((' + this.value + ')))')
                        : '',
                      this.value != '',
                      this.value == ''
                    )
                    .draw();

                  $(this)
                    .focus()[0]
                    .setSelectionRange(cursorPosition, cursorPosition);
                });
            });
        },

        "language": { url: "//cdn.datatables.net/plug-ins/1.11.3/i18n/es_es.json" },
        "ajax": {
          "url": url,
          "dataSrc": ""
        },
"columnDefs":[{
  target: 0,
}],
        "columns": [
          { "width":"10%","data": "Nombre" },
          { "width":"10%","data": "NCarpeta" },
          { "width":"10%","data": "TareaRealizada" },
          { "width":"10%","data": "ProximaTarea" },
          { "type": 'datetime-moment',"width":"10%","data": "FechaLimite" },
          { "width":"10%","data": "Estado" },
          {
            "data": "id",
            render: function (data, type, row) {
              return '<a href="/editarTareas/' + data + '" class="btn btn-outline-info">editar</a>'
            }
          },

        ],
      });
    });

  </script>

</body>

</html>